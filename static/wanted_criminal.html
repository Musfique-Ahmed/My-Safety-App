<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="utf-8">
  <title>My Safety – Wanted (Standalone)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Tailwind + Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide/dist/umd/lucide.min.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; }
    /* Shadow button style */
    .shadow-button {
      border-radius: 9999px;
      padding: 0.5rem 1rem;
      background-color: rgba(147, 51, 234, 0.2);
      color: #d8b4fe;
      font-weight: 600;
      box-shadow: 
        -4px -4px 8px rgba(255, 255, 255, 0.05),
        4px 4px 8px rgba(0, 0, 0, 0.5);
      transition: all 0.2s ease-in-out;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    }
    .light .shadow-button {
      background-color: #f3f4f6;
      color: #4c1d95;
      box-shadow: 
        -4px -4px 8px rgba(255, 255, 255, 1),
        4px 4px 8px rgba(0, 0, 0, 0.1);
    }
    .shadow-button:hover {
      box-shadow: 
        -2px -2px 4px rgba(255, 255, 255, 0.1), 
        2px 2px 4px rgba(0, 0, 0, 0.6);
      transform: scale(0.98);
    }
    .light .shadow-button:hover {
      box-shadow: 
        -2px -2px 4px rgba(255, 255, 255, 0.8), 
        2px 2px 4px rgba(0, 0, 0, 0.15);
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">

<!-- ===== FIXED HEADER ===== -->
<header class="sticky top-0 z-50 bg-white dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-800 p-4 flex items-center justify-between shadow-md">
  <!-- Logo + Title -->
  <div class="flex items-center space-x-3">
    <div class="flex items-center justify-center text-purple-600 dark:text-purple-500">
      <i data-lucide="shield" class="w-8 h-8"></i>
    </div>
    <h1 class="text-xl font-bold text-gray-900 dark:text-white hidden sm:block">Safe Route Dashboard</h1>
  </div>

  <!-- Navigation -->
  <nav class="hidden lg:flex items-center space-x-4">
    <a href="index.html" class="shadow-button text-sm">
      <i data-lucide="route" class="w-4 h-4 mr-2"></i> Safe Area
    </a>
    <a href="#" class="shadow-button text-sm">
      <i data-lucide="siren" class="w-4 h-4 mr-2"></i> Report to Police
    </a>
    <a href="wanted_criminal.html" class="shadow-button text-sm bg-purple-600 text-white">
      <i data-lucide="users" class="w-4 h-4 mr-2"></i> Wanted Criminals
    </a>
<!--
    <a href="#" class="shadow-button text-sm">
      <i data-lucide="list-filter" class="w-4 h-4 mr-2"></i> Report Status Check
    </a>
-->
    <a href="missing_person.html" class="shadow-button text-sm">
      <i data-lucide="search" class="w-4 h-4 mr-2"></i> Missing Persons
    </a>
  </nav>

  <!-- Actions -->
  <div class="flex items-center space-x-4 relative">
    <!-- Panic Button -->
    <button id="panic-btn" class="flex items-center justify-center w-12 h-12 rounded-full bg-red-600 hover:bg-red-700 text-white font-bold text-lg shadow-lg" title="Send Panic Alert">
      <i data-lucide="alert-triangle" class="w-6 h-6"></i>
    </button>

    <!-- Theme Toggle -->
    <button id="theme-toggle" class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors">
      <i data-lucide="sun" class="w-6 h-6 block dark:hidden"></i>
      <i data-lucide="moon" class="w-6 h-6 hidden dark:block"></i>
    </button>

    <!-- User Menu -->
    <div class="relative">
      <button id="user-menu-button" class="flex items-center space-x-2 p-1 rounded-full bg-purple-600 hover:bg-purple-700 text-white transition-colors focus:outline-none">
        <div class="w-8 h-8 flex items-center justify-center text-xl font-semibold rounded-full bg-white text-purple-600">F</div>
        <i data-lucide="chevron-down" class="w-4 h-4 hidden sm:block"></i>
      </button>

      <!-- Dropdown -->
      <div id="user-menu" class="absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 hidden">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <p class="font-semibold text-gray-900 dark:text-white">Hi, Farhan!</p>
          <p class="text-sm text-gray-500 dark:text-gray-400">farhan@example.com</p>
        </div>
        <a href="#" class="flex items-center p-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
          <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i>
          Chat with Admin
        </a>
        <button onclick="alert('Logging out...')" class="w-full text-left flex items-center p-3 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors rounded-b-xl">
          <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
          Logout
        </button>
      </div>
    </div>
  </div>
</header>
<!-- ===== /HEADER ===== -->

<!-- ===== MAIN PAGE (kept from your code) ===== -->
<div class="container max-w-5xl mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">Wanted Criminals</h1>
  <div class="flex gap-2 mb-4">
    <input id="searchWanted" placeholder="Search name, crime, area…" class="flex-1 border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-200">
    <button id="refreshWanted" class="px-4 py-2 rounded-lg bg-gray-800 dark:bg-gray-700 text-white">Refresh</button>
  </div>
  <div id="wantedGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
</div>

<!-- Modal -->
<div id="backdrop" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
  <div class="modal bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-xl max-w-2xl w-11/12">
    <header class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700 p-4">
      <h2 id="modalTitle" class="text-lg font-bold">Details</h2>
      <button id="closeModal" class="px-3 py-1 rounded-lg bg-gray-200 dark:bg-gray-800">Close</button>
    </header>
    <div id="modalBody" class="p-4"></div>
  </div>
</div>

<script>
  // Lucide icons
  lucide.createIcons();

  // User menu toggle
  const userMenuButton = document.getElementById("user-menu-button");
  const userMenu = document.getElementById("user-menu");
  userMenuButton.addEventListener("click", () => {
    userMenu.classList.toggle("hidden");
  });
  document.addEventListener("click", (e) => {
    if (!userMenuButton.contains(e.target) && !userMenu.contains(e.target)) {
      userMenu.classList.add("hidden");
    }
  });

  // Theme toggle
  const themeToggle = document.getElementById("theme-toggle");
  themeToggle.addEventListener("click", () => {
    document.documentElement.classList.toggle("dark");
    if (document.documentElement.classList.contains("dark")) {
      localStorage.theme = "dark";
    } else {
      localStorage.theme = "light";
    }
    lucide.createIcons(); // Refresh icons
  });
</script>

<!-- ===== ORIGINAL SCRIPT (kept same, only layout adapted) ===== -->
<script>
"use strict";
// Data (with age, height_cm, complexion)
const wantedData = [
  {
    id:1,
    name:"Rahim Uddin",
    photo_url:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=800&auto=format&fit=crop",
    crimes:["Robbery","Extortion"],
    last_seen_location:"Mirpur, Dhaka",
    last_seen_time:"2025-09-25T18:30:00",
    reward:50000,
    note:"Considered dangerous.",
    age:32,
    height_cm:175,
    complexion:"Wheatish"
  },
  {
    id:2,
    name:"Tariq Hasan",
    photo_url:"https://images.unsplash.com/photo-1542202229-7d93c33f5d07?q=80&w=800&auto=format&fit=crop",
    crimes:["Fraud"],
    last_seen_location:"Agrabad, Chattogram",
    last_seen_time:"2025-09-20T14:10:00",
    reward:20000,
    note:"Drives a black sedan.",
    age:40,
    height_cm:168,
    complexion:"Fair"
  },
  {
    id:3,
    name:"Unknown Alias 'Blue'",
    photo_url:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?q=80&w=800&auto=format&fit=crop",
    crimes:["Burglary"],
    last_seen_location:"Uttara, Dhaka",
    last_seen_time:"2025-09-28T05:45:00",
    reward:0,
    note:"Seen near construction sites.",
    age:29,
    height_cm:180,
    complexion:"Dark"
  }
];

// Helpers
const $ = sel => document.querySelector(sel);
const fmt = dt => dt ? new Date(dt).toLocaleString() : "";

function fillWithGeo(input){
  if(!navigator.geolocation){ alert("Geolocation not supported."); return; }
  navigator.geolocation.getCurrentPosition(
    pos => { input.value = `${pos.coords.latitude.toFixed(6)}, ${pos.coords.longitude.toFixed(6)}`; },
    err => alert("Unable to get location: " + err.message),
    {enableHighAccuracy:true, timeout:10000}
  );
}

// Cards
function card(item){
  const el = document.createElement("div");
  el.className = "rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow";
  el.innerHTML = `
    <img src="${item.photo_url}" alt="${item.name}" class="w-full h-40 object-cover">
    <div class="p-4">
      <div class="flex justify-between items-center mb-2">
        <div class="font-semibold">${item.name}</div>
        <span class="px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded-full">Wanted</span>
      </div>
      <div class="text-sm text-gray-500 dark:text-gray-400">Last seen: ${item.last_seen_location} · ${fmt(item.last_seen_time)}</div>
      <div class="mt-2">
        <button class="px-3 py-1 rounded-lg bg-purple-600 hover:bg-purple-700 text-white text-sm show">Show details</button>
      </div>
    </div>`;
  el.querySelector(".show").addEventListener("click",()=>openModal(item));
  return el;
}

function render(list){
  const grid = $("#wantedGrid");
  grid.innerHTML = "";
  list.forEach(it => grid.appendChild(card(it)));
}

// Modal
function openModal(item){
  $("#modalTitle").textContent = item.name + " — Details";
  $("#modalBody").innerHTML = `
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <img src="${item.photo_url}" class="rounded-lg w-full h-48 object-cover md:col-span-1" alt="${item.name}">
      <div class="md:col-span-2 text-sm space-y-1">
        <p><b>Crimes:</b> ${item.crimes.join(", ")}</p>
        <p><b>Last seen:</b> ${item.last_seen_location} at ${fmt(item.last_seen_time)}</p>
        <p><b>Reward:</b> ৳${item.reward.toLocaleString()}</p>
        <p><b>Age:</b> ${item.age} yrs</p>
        <p><b>Height:</b> ${item.height_cm} cm</p>
        <p><b>Complexion:</b> ${item.complexion}</p>
        <p class="text-gray-500 dark:text-gray-400">${item.note || ""}</p>
        <div>
          <button id="seenBtn" class="mt-2 px-3 py-1 bg-green-500 text-white rounded">I have seen this person</button>
        </div>
        <div id="seenWrap" class="hidden mt-3 p-3 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800">
          <div class="font-semibold mb-2">Report Last Seen (Notifies police)</div>
          <input id="seen_time" type="datetime-local" class="w-full mb-2 p-2 border rounded bg-white dark:bg-gray-900">
          <div class="flex gap-2 mb-2">
            <input id="seen_location" placeholder="Type address or use my location" class="flex-1 p-2 border rounded bg-white dark:bg-gray-900">
            <button id="geoSeen" class="px-2 py-1 rounded bg-gray-200 dark:bg-gray-700">Use my location</button>
          </div>
          <label class="flex items-center gap-2 text-sm">
            <input id="still_with_finder" type="checkbox" class="w-4 h-4"> Still with finder
          </label>
          <div class="text-right mt-2">
            <button id="submitSeen" class="px-3 py-1 bg-sky-400 text-black rounded">Send Notification</button>
          </div>
        </div>
      </div>
    </div>`;
  $("#backdrop").classList.remove("hidden");
  $("#backdrop").classList.add("flex");
  $("#seenBtn").onclick = ()=> $("#seenWrap").classList.toggle("hidden");
  $("#geoSeen").onclick = ()=> fillWithGeo($("#seen_location"));
  $("#submitSeen").onclick = ()=>{
    const payload = {
      criminal_id: item.id,
      last_seen_time: $("#seen_time").value,
      last_seen_location: $("#seen_location").value,
      still_with_finder: $("#still_with_finder").checked
    };
    alert("🚓 Notification sent to police with your sighting.\n\n" + JSON.stringify(payload,null,2));
    closeModal();
  };
}
function closeModal(){ $("#backdrop").classList.add("hidden"); }
$("#closeModal").addEventListener("click", closeModal);
$("#backdrop").addEventListener("click", e=>{ if(e.target.id==="backdrop") closeModal(); });

// Search
function filterItem(it){
  const q = $("#searchWanted").value.trim().toLowerCase();
  if(!q) return true;
  return it.name.toLowerCase().includes(q) ||
         it.last_seen_location.toLowerCase().includes(q) ||
         it.crimes.join(" ").toLowerCase().includes(q);
}
$("#searchWanted").addEventListener("input", ()=> render(wantedData.filter(filterItem)));
$("#refreshWanted").addEventListener("click", ()=> render(wantedData.filter(filterItem)));

// First render
render(wantedData);
</script>
</body>
</html>